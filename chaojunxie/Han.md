# Han

1. kafka消息重发怎么处理，生产者确认机制？

   kafka消息重发怎么处理  有重试的场景

   配置ack值   让分区leader副本返回ack标示；

   让ISR列表副本都返回ack标示；

   消息发送出去就可以了   

2. kafak重复消费

   保证消费者幂等消费

3. sql调优

   

4. 数据量大概有多大

   

5. 有没用过netty

   

6. es查询优化

   ## （1）性能优化的杀手锏——filesystem cache

   elastcisearch减少数据量仅仅放要用于搜索的几个关键字段即可，尽量写入es的数据量跟es机器的filesystem cache是差不多的就可以了；其他不用来检索的数据放hbase里，或者mysql。

   所以之前有些学员也是问，我也是跟他们说，尽量在es里，就存储必须用来搜索的数据，比如说你现在有一份数据，有100个字段，其实用来搜索的只有10个字段，建议是将10个字段的数据，存入es，剩下90个字段的数据，可以放mysql，hadoop hbase，都可以

   这样的话，es数据量很少，10个字段的数据，都可以放内存，就用来搜索，搜索出来一些id，通过id去mysql，hbase里面去查询明细的数据(filesystem cache值尽量大  大概是整体数据的一半   ES的字段数据尽量少  其他字段通过hbase或者mysql的方式反查)

   ## （2）数据预热

    

   假如说，哪怕是你就按照上述的方案去做了，es集群中每个机器写入的数据量还是超过了filesystem cache一倍，比如说你写入一台机器60g数据，结果filesystem cache就30g，还是有30g数据留在了磁盘上。

    

   举个例子，就比如说，**微博，你可以把一些大v，平时看的人很多的数据给提前你自己后台搞个系统，每隔一会儿，你自己的后台系统去搜索一下热数据，刷到filesystem cache里去，后面用户实际上来看这个热数据的时候，他们就是直接从内存里搜索了，很快。**

   电商，你可以将平时查看最多的一些商品，比如说iphone 8，热数据提前后台搞个程序，每隔1分钟自己主动访问一次，刷到filesystem cache里去。

   对于那些你觉得比较热的，经常会有人访问的数据，最好做一个专门的缓存预热子系统，就是对热数据，每隔一段时间，你就提前访问一下，让数据进入filesystem cache里面去。这样期待下次别人访问的时候，一定性能会好一些。

   ## （3）冷热分离

   ## （4）分页性能优化

7. java的线程安全，怎么实现

   

8. sync和lock的区别

   

9. mybatis分页是怎么实现的

   

10. redis缓存击穿，怎么避免

    

11. volatile关键字，项目中什么情况使用过?

    

12. Spring boot优势